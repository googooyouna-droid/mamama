# ğŸš€ ë§ˆìŒì¼ê¸°ì¥ Firebase Hosting ë°°í¬ ê°€ì´ë“œ

## ğŸ“‹ ì‚¬ì „ ì¤€ë¹„ì‚¬í•­

### 1. í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜
```bash
# Flutter SDK ì„¤ì¹˜ (ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆë‹¤ë©´ ìƒëµ)
# https://flutter.dev/docs/get-started/install

# Firebase CLI ì„¤ì¹˜
npm install -g firebase-tools

# Firebase ë¡œê·¸ì¸
firebase login
```

### 2. Firebase í”„ë¡œì íŠ¸ ì„¤ì •
1. [Firebase Console](https://console.firebase.google.com/) ì ‘ì†
2. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„± ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì íŠ¸ ì„ íƒ
3. ë‹¤ìŒ ì„œë¹„ìŠ¤ í™œì„±í™”:
   - **Authentication** (ìµëª… ë¡œê·¸ì¸)
   - **Firestore Database**
   - **Storage**
   - **Hosting**

### 3. Firebase ì„¤ì • íŒŒì¼ ì—…ë°ì´íŠ¸
`lib/firebase_options.dart` íŒŒì¼ì˜ API í‚¤ë¥¼ ì‹¤ì œ Firebase í”„ë¡œì íŠ¸ í‚¤ë¡œ êµì²´:

```dart
// firebase_options.dartì—ì„œ ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´
class DefaultFirebaseOptions {
  static const FirebaseOptions web = FirebaseOptions(
    apiKey: 'your-actual-api-key',
    appId: 'your-actual-app-id',
    messagingSenderId: 'your-actual-sender-id',
    projectId: 'your-actual-project-id',
    // ...
  );
}
```

---

## ğŸ› ï¸ ë°°í¬ ë°©ë²•

### ë°©ë²• 1: ìë™ ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‚¬ìš© (ê¶Œì¥)

#### Windows ì‚¬ìš©ì
```cmd
# ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
deploy.bat
```

#### macOS/Linux ì‚¬ìš©ì
```bash
# ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x deploy.sh

# ë°°í¬ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
./deploy.sh
```

### ë°©ë²• 2: ìˆ˜ë™ ë°°í¬

#### 1ë‹¨ê³„: Flutter Web ë¹Œë“œ
```bash
cd mind_diary
flutter build web --release
```

#### 2ë‹¨ê³„: Firebase Hosting ì´ˆê¸°í™” (ìµœì´ˆ 1íšŒ)
```bash
firebase init hosting
```
ì„ íƒ ì‚¬í•­:
- **What do you want to use as your public directory?** â†’ `build/web`
- **Configure as a single-page app?** â†’ `Yes`
- **Set up automatic builds and deploys with GitHub?** â†’ `No`
- **File build/web/index.html already exists. Overwrite?** â†’ `No`

#### 3ë‹¨ê³„: ë°°í¬ ì‹¤í–‰
```bash
firebase deploy --only hosting
```

---

## ğŸ“ ë°°í¬ íŒŒì¼ êµ¬ì¡°

```
mind_diary/
â”œâ”€â”€ build/web/                 # Flutter ë¹Œë“œ ê²°ê³¼ë¬¼
â”‚   â”œâ”€â”€ index.html
â”‚   â”œâ”€â”€ main.dart.js
â”‚   â”œâ”€â”€ flutter.js
â”‚   â””â”€â”€ assets/
â”œâ”€â”€ firebase.json              # Firebase Hosting ì„¤ì •
â”œâ”€â”€ deploy.bat                 # Windows ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ deploy.sh                  # Unix ë°°í¬ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ QA_ì²´í¬ë¦¬ìŠ¤íŠ¸.md           # í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸
```

---

## ğŸŒ ë°°í¬ í›„ í™•ì¸ì‚¬í•­

### 1. ì›¹ì‚¬ì´íŠ¸ ì ‘ì†
- Firebase Console â†’ Hosting â†’ ì‚¬ì´íŠ¸ URL í™•ì¸
- ì˜ˆ: `https://your-project-id.web.app`

### 2. ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] í™ˆ í™”ë©´ ë¡œë”©
- [ ] ê°€ì¡± PIN ì…ë ¥
- [ ] ì—­í•  ì„ íƒ (ë¶€ëª¨/ìë…€)
- [ ] ë‹¬ë ¥ í™”ë©´ ì´ë™
- [ ] ì¼ê¸° ì‘ì„± í™”ë©´ ì´ë™

### 3. Firebase ì„œë¹„ìŠ¤ ì—°ë™ í™•ì¸
- [ ] Authentication ìµëª… ë¡œê·¸ì¸
- [ ] Firestore ë°ì´í„° ì½ê¸°/ì“°ê¸°
- [ ] Storage íŒŒì¼ ì—…ë¡œë“œ
- [ ] ì˜¤í”„ë¼ì¸ ìºì‹œ ë™ì‘

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë¹Œë“œ ì˜¤ë¥˜
```bash
# Flutter ì˜ì¡´ì„± ì—…ë°ì´íŠ¸
flutter pub get

# Flutter í´ë¦° ë¹Œë“œ
flutter clean
flutter build web --release
```

### Firebase ë°°í¬ ì˜¤ë¥˜
```bash
# Firebase ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸
firebase login --reauth

# Firebase í”„ë¡œì íŠ¸ í™•ì¸
firebase projects:list

# í”„ë¡œì íŠ¸ ë³€ê²½ (í•„ìš”ì‹œ)
firebase use your-project-id
```

### CORS ì˜¤ë¥˜
Firebase Storageì—ì„œ CORS ì„¤ì •ì´ í•„ìš”í•œ ê²½ìš°:
```bash
# gsutil ì„¤ì¹˜ í›„ ì‹¤í–‰
gsutil cors set cors.json gs://your-bucket-name
```

cors.json íŒŒì¼:
```json
[
  {
    "origin": ["https://your-project-id.web.app"],
    "method": ["GET", "POST", "PUT", "DELETE"],
    "maxAgeSeconds": 3600
  }
]
```

---

## ğŸ“Š ì„±ëŠ¥ ìµœì í™”

### 1. ë¹Œë“œ ìµœì í™”
```bash
# ì••ì¶•ëœ ë¹Œë“œ
flutter build web --release --dart-define=Dart2jsOptimization=O4
```

### 2. Firebase Hosting ìºì‹±
`firebase.json`ì—ì„œ ìºì‹œ ì„¤ì •:
```json
{
  "hosting": {
    "headers": [
      {
        "source": "**/*.@(js|css)",
        "headers": [
          {
            "key": "Cache-Control",
            "value": "max-age=31536000"
          }
        ]
      }
    ]
  }
}
```

### 3. ì´ë¯¸ì§€ ìµœì í™”
- WebP í˜•ì‹ ì‚¬ìš© ê¶Œì¥
- ì´ë¯¸ì§€ í¬ê¸° ìµœì í™”
- ì§€ì—° ë¡œë”© ì ìš©

---

## ğŸ”’ ë³´ì•ˆ ì„¤ì •

### 1. Firebase ë³´ì•ˆ ê·œì¹™

#### Firestore ë³´ì•ˆ ê·œì¹™
```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /families/{familyId}/entries/{date} {
      allow read, write: if request.auth != null;
    }
  }
}
```

#### Storage ë³´ì•ˆ ê·œì¹™
```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /families/{familyId}/photos/{allPaths=**} {
      allow read, write: if request.auth != null;
    }
  }
}
```

### 2. HTTPS ê°•ì œ ì„¤ì •
`firebase.json`ì— ì¶”ê°€:
```json
{
  "hosting": {
    "headers": [
      {
        "source": "**",
        "headers": [
          {
            "key": "Strict-Transport-Security",
            "value": "max-age=31536000; includeSubDomains"
          }
        ]
      }
    ]
  }
}
```

---

## ğŸ“ˆ ëª¨ë‹ˆí„°ë§ ë° ë¶„ì„

### 1. Firebase Analytics ì„¤ì •
```dart
// main.dartì— ì¶”ê°€
import 'package:firebase_analytics/firebase_analytics.dart';

void main() async {
  // ...
  FirebaseAnalytics analytics = FirebaseAnalytics.instance;
  runApp(const MindDiaryApp());
}
```

### 2. ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
- Firebase Console â†’ Performance ëª¨ë‹ˆí„°ë§
- Core Web Vitals í™•ì¸
- ì‚¬ìš©ì ê²½í—˜ ì§€í‘œ ì¶”ì 

### 3. ì—ëŸ¬ ëª¨ë‹ˆí„°ë§
- Firebase Console â†’ Crashlytics
- ì‹¤ì‹œê°„ ì—ëŸ¬ ì¶”ì 
- ì‚¬ìš©ì ì˜í–¥ë„ ë¶„ì„

---

## ğŸ¯ ë°°í¬ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë°°í¬ ì „
- [ ] Firebase í”„ë¡œì íŠ¸ ì„¤ì • ì™„ë£Œ
- [ ] API í‚¤ ë° ì„¤ì • íŒŒì¼ ì—…ë°ì´íŠ¸
- [ ] ë¡œì»¬ í…ŒìŠ¤íŠ¸ ì™„ë£Œ
- [ ] QA ì²´í¬ë¦¬ìŠ¤íŠ¸ ê²€í† 

### ë°°í¬ ì¤‘
- [ ] Flutter ë¹Œë“œ ì„±ê³µ
- [ ] Firebase ë°°í¬ ì„±ê³µ
- [ ] ë°°í¬ URL í™•ì¸

### ë°°í¬ í›„
- [ ] ì›¹ì‚¬ì´íŠ¸ ì ‘ì† í™•ì¸
- [ ] ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] Firebase ì„œë¹„ìŠ¤ ì—°ë™ í™•ì¸
- [ ] ì„±ëŠ¥ ë° ë³´ì•ˆ ì„¤ì • í™•ì¸
- [ ] ëª¨ë‹ˆí„°ë§ ì„¤ì • í™•ì¸

---

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ë¬¸ì œ ë°œìƒ ì‹œ
1. **ë¡œê·¸ í™•ì¸**: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ â†’ Console
2. **Firebase Console**: ì—ëŸ¬ ë¡œê·¸ í™•ì¸
3. **Flutter Doctor**: `flutter doctor` ì‹¤í–‰
4. **ì˜ì¡´ì„± í™•ì¸**: `flutter pub deps` ì‹¤í–‰

### ì¶”ê°€ ë¦¬ì†ŒìŠ¤
- [Flutter Web ë¬¸ì„œ](https://flutter.dev/web)
- [Firebase Hosting ë¬¸ì„œ](https://firebase.google.com/docs/hosting)
- [Firebase ë³´ì•ˆ ê·œì¹™](https://firebase.google.com/docs/rules)

---

**ë°°í¬ ì™„ë£Œ í›„ ë°˜ë“œì‹œ QA ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ ì‹¤í–‰í•˜ì—¬ ëª¨ë“  ê¸°ëŠ¥ì´ ì •ìƒ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”!**
